	server {
		# listen on port 80 (http)
		listen 80;
		listen [::]:80;
		server_name _;
		#location /aX4InTaVia/ {
		location / {
			# redirect any requests to the same URL but on https
			return 301 https://$host$request_uri;
		}
	}
	server {
		# listen on port 443 (https)
		listen 443 http2 ssl;
		listen [::]:443 http2 ssl;
				
		server_name _;
	
		# location of the self-signed SSL certificate
		ssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;
		ssl_certificate_key /etc/ssl/private/nginx-selfsigned.key;
		ssl_dhparam /etc/ssl/certs/dhparam.pem;
		
		# write access and error logs to /var/log/
		access_log /var/log/aX4InTaVia_access.log;
		error_log /var/log/aX4InTaVia_error.log;
	
		
		location /aX4InTaVia/ {
#		location / {
			# forward application requests to the gunicorn server
			proxy_pass http://unix:/home/annoxplorer/ax4InTaVia/backend/aX4InTaVia_server.sock ;
			proxy_redirect off;
			proxy_set_header Host $host;
			proxy_set_header X-Real-IP $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header X-Forwarded-Proto $scheme;

			auth_basic "Restricted Access";
			auth_basic_user_file /etc/nginx/.htpasswd;
		}

		location /aX4InTaVia/static/ {
     		# handle static files directly, without forwarding to the application
        	alias /home/annoxplorer/ax4InTaVia/frontend/static/;
#		root /home/annoxplorer/ax4InTaVia/frontend/;
        	expires 30d;
		}	
	}
